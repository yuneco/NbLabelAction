# これは何？

+ AnimateCC(旧Flash)でhtml5出力する際に使うJavaScriptライブラリです
+ 簡単なクリック制御/アニメーション制御をプログラミングなしで実現します
+ 主に非プログラマなイラストレーター/デザイナが「動く絵本」レベルの作品を制作する際に使用することを想定しています

# 導入方法

## 簡単な方法
+ 右上の「download zip」を押してファイル一式をダウンロード
+ templateフォルダに設定済みのflaファイルがあるので、これを雛形に制作してください
+ flaを開いたら、Cmd(Ctrl)+Enterで普通にパブリッシュプレビューしてください。ブラウザが開いて、簡単なページ送りのデモが確認できるはずです
+ 不要なデモ用コンテンツを削除して、あとは自由に制作してください

## もうちょっとちゃんとした説明
テンプレートを使用しない場合、下記の手順に従ってください：

1. 新規ドキュメントから「HTML5 Canvas」を作成
1. パブリッシュ設定＞詳細を開いてhtmlのテンプレートに同梱の「template.html」を設定
1. 適当に保存して、一旦パブリッシュ
1. 生成されたhtmlファイルと同じ階層に「NbLabelAction.js」をコピー

補足：

以前のバージョンで1フレーム目に必須だった下記のスクリプトは不要になりました（template.htmlに記載を移動しています）

```javascript
NbLabelAction.init();
```

# アニメーションの制御方法
すべてのアニメーションはフレームにラベルをつけることで制御します。

## とりあえず、例
![サンプル](https://github.com/yuneco/NbLabelAction/blob/master/example/sample_img1.png)
+ 普通に1フレーム目(ラベル：top)から再生開始
+ ラベル：topの最後（15フレーム目）まで来たらtopの先頭に戻る
+ クリックされたらラベル：@clickに飛ぶ
+ ラベル：@clickの最後（26フレーム目）まで来たらtopに飛ぶ

## ラベルの形式
制御用のラベル（以下、アクションラベルと呼びます）は下記の形式で記載します：
``` 
ラベル名:アクション 
```
例：
```
PiyoPiyo:<
MiyaoMiyao:s.>
@click:s.PiyoPiyo
```
これらは全て有効なアクションラベルです。

### ラベル名
ラベル名はラベルを識別するための名前です。半角英数字（1文字目はアルファベットのみ可）で命名してください。

### 「@click」ラベル名
ラベル名として「@click」を指定すると、クリック時に自動的にこのラベルの位置にジャンプするようになります。

### アクション
アクションは *** 「そのラベルのフレームの最後に到達した時に実行すること」 *** を指定します。アクションには以下の種類があります。

|アクション|意味|例|
|:--:|:--:|:--:|
|\||停止|PlayOnce: \||
|>|次のラベルへ移動|Next:>|
|<|ラベルの先頭に戻る＝ループする|LoopMe:<|
|<<|一つ前のラベルへ移動|Back:<|
|ラベル名|「ラベル名」の位置に移動|@click:Next|

アクションには操作対象として「親」または「ステージ」を指定するとこができます。

|対象|対象の意味|例|例の意味|
|:--:|:--|:--|:--|
|p.|親|@click:p.>|クリック時にここから再生し、最後まで到達したら、親タイムラインを次のラベル位置に進める（=ページ送り的な使い方）|
|s.|ステージ|@click:s.FirstPage|クリック時にここから再生し、最後まで到達したら、ステージの「FirstPage」に移動する（ホームボタン的な使い方）|

### 拡張アクション
JavaScriptを使って、任意のアクションを追加することができます。拡張アクションはNbLabelAction.extendの下に定義します。
以下の点に注意してください：

+ アクションラベルから呼び出す際に「( )」でくくって引数を指定できますが、JavaScript側には ***カッコ内の文字列がそのまま*** 引渡されます
+ thisは処理対象のMovieClipです（s.またはp.が指定された場合はステージや親のMovieClipになる点に注意してください）
+ 関数からの戻り値はラベル名として解釈され、ラベルが存在する場合はそこに移動(gotoAndPlay)します。関数内で別なラベルにジャンプしたり停止したりする場合は何も値を返さないようにします

拡張アクションの例です：

例：引数で指定されたラベルのどれかにランダムで飛ぶ拡張アクションの定義
```javascript
NbLabelAction.extension.select  = function(param){
	if(!param){return}
	var labels		= param.split(/,/);
	return labels[Math.floor(Math.random() * labels.length)];
};
```
これは、以下のようにしてアクションラベルとして使用できます：

例：引数で指定されたラベルのどれかにランダムで飛ぶ
```
@click:#select(labe1A,labelB,labelC)
```





# ライセンス
MIT


# 連絡先
+ twitter : @yuneco
+ mail : info@nekobooks.com
